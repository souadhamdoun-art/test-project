# Aliases Laravel pour éviter les problèmes de permissions
# Ajoutez ceci à votre ~/.bashrc ou ~/.zshrc : source /path/to/project/.aliases

# Fonction pour s'assurer que les commandes Laravel gardent les bonnes permissions
laravel_safe() {
    php artisan "$@"
    # Corriger les permissions des nouveaux fichiers créés
    find . -user root -type f 2>/dev/null -exec sudo chown $USER:$USER {} \; 2>/dev/null || true
}

# Aliases sécurisés pour Laravel
alias art='laravel_safe'
alias make:model='laravel_safe make:model'
alias make:migration='laravel_safe make:migration'
alias make:controller='laravel_safe make:controller'
alias make:factory='laravel_safe make:factory'
alias make:seeder='laravel_safe make:seeder'

# Alias pour corriger rapidement les permissions
alias fix-perms='./fix-permissions.sh'

# Fonction pour vérifier les permissions avant de travailler
check_perms() {
    echo "🔍 Vérification des permissions du projet..."
    problematic=$(find . -user root -type f 2>/dev/null | wc -l)
    if [ $problematic -gt 0 ]; then
        echo "⚠️  $problematic fichiers avec des permissions root trouvés"
        echo "💡 Exécutez: ./fix-permissions.sh"
        return 1
    else
        echo "✅ Permissions OK"
        return 0
    fi
}

alias check-perms='check_perms'
